% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/enforce_pta.R
\name{enforce_PTA_imputation}
\alias{enforce_PTA_imputation}
\title{Generate counterfactual outcomes using imputation approach}
\usage{
enforce_PTA_imputation(
  df,
  unit,
  group,
  time,
  outcome,
  controls = NULL,
  seed = NULL
)
}
\arguments{
\item{df}{A data.table containing the panel data}

\item{unit}{Character string specifying the column name for unit identifiers}

\item{group}{Character string specifying the column name for treatment group/cohort}

\item{time}{Character string specifying the column name for time periods}

\item{outcome}{Character string specifying the column name for the outcome variable}

\item{controls}{Character string specifying whether to include controls ("controls") or
use only fixed effects ("none")}
}
\value{
A data.table with an additional column 'counterfactual' containing:
\itemize{
\item Actual outcomes for untreated observations
\item Imputed counterfactual outcomes for treated observations
}
}
\description{
This function implements the imputation approach for difference-in-differences with staggered adoption.
It estimates fixed effects using only untreated observations and generates counterfactual outcomes
for treated observations.
}
\details{
The function follows these steps:
\enumerate{
\item Splits data into treated and untreated observations
\item Estimates fixed effects model on untreated observations only
\item Uses these estimates to impute counterfactuals for treated observations
}

The imputation draws from a normal distribution centered at the predicted mean
with variance equal to the residual variance from the first-stage regression.
}
\examples{
df <- data.table(
  unit = rep(1:10, each = 5),
  time = rep(1:5, 10),
  group = rep(c(2,3,4), length.out = 10),
  y = rnorm(50),
  unemp_rate = runif(50)
)
result <- enforce_PTA_imputation(df, "unit", "group", "time", "y", "none")

}
